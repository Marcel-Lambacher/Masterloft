---

- name: Initialize kubectl_download_url
  set_fact:
    kubectl_download_url: https://storage.googleapis.com/kubernetes-release/release/{{ kubectl_version }}/bin/linux/arm64/kubectl
    kubectl_checksum: "{{ kubectl_arm_checksum }}"
  when: ansible_architecture == 'aarch64'

- name: Initialize kubectl_download_url
  set_fact:
    kubectl_download_url: https://storage.googleapis.com/kubernetes-release/release/{{ kubectl_version }}/bin/linux/amd64/kubectl
    kubectl_checksum: "{{ kubectl_amd_checksum }}"
  when: ansible_architecture == 'x86_64'

- name: Install kubctl
  get_url:                                                           
      url: "{{ kubectl_download_url }}"
      dest: /usr/local/bin/kubectl
      owner: root
      group: root
      mode: 755
      checksum: "{{ kubectl_checksum }}"