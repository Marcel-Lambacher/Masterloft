ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: traefik
    traefik.ingress.kubernetes.io/router.middlewares: nextcloud-redirect-card-and-cal-dav@kubernetescrd

securityContext:
  runAsUser: 1000
  runAsGroup: 1001
  runAsNonRoot: true

nextcloud:
  host: nextcloud.masterloft.k8s.marcel-lambacher.de
  existingSecret:
    enabled: true
    secretName: nextcloud-admin-secret
    usernameKey: username
    passwordKey: password

  configs:
    traefik.config.php: |-
      <?php
      $CONFIG = array (
        'overwrite.cli.url' => 'https://nextcloud.masterloft.k8s.marcel-lambacher.de',
        'overwriteprotocol' => 'https'
      );

  extraVolumes:
  - name: masterloft-nas-storage
    hostPath:
      path: /data
      type: ""

  extraVolumeMounts:
   - name: masterloft-nas-storage
     mountPath: /masterloft-nas-storage

  extraSecurityContext:
    runAsUser: 1000
    runAsGroup: 1001
    runAsNonRoot: true

persistence:
  enabled: true
  storageClass: longhorn-single-replica

# redis:
#   global:
#     storageClass: longhorn-single-replica
#   architecture: standalone
#   enabled: true
#   # persistence:
#   #   storageClass: longhorn-single-replica
#   auth:
#     enabled: true
#     existingSecret: nextcloud-redis-auth
#     existingSecretPasswordKey: password